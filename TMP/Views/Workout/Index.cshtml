@using TMP.Common

@{
    ViewBag.Title = "Workouts";
    Layout = "~/Views/Shared/_StndGridLayout.cshtml";
    ViewBag.PageCSS = "addWorkoutPage";
}

@section koscripts {
    <script src="~/Scripts/koactions/core.js" type="text/javascript"></script>
    <script src="~/Scripts/koactions/workout.js" type="text/javascript"></script>
}

@section heading {
    <h2>Add a workout</h2>
}

<section class="formLoading">
    Loading form
</section>

<fieldset class="form" id="workoutForm">
    <input type="hidden" id="requestVerificationToken" value="@Helpers.Instance.GetAntiForgeryToken()" />

    <section data-bind="foreach: sets">
        <div class="field">
            <div class="value workoutName">
                <input type="text" placeholder="Workout name" data-bind="textInput: workoutName"/>
                <div class="actions">
                    <a href="#" title="show / hide workout information" data-bind="click: toggleVisible, visible: workoutName, css: toggleSet() ? 'glyphicon glyphicon-chevron-up' : 'glyphicon glyphicon-chevron-down'"></a>
                    <a href="#" title="remove this set from workout" class="glyphicon glyphicon-trash" data-bind="click: remove, visible: workoutName"></a>
                </div>
            </div>
        </div>

        <div class="field" data-bind="visible: toggleSet">

            <!-- ko if: metricType() == 'time' -->
            <ol class="value metric time" data-bind="foreach: exercises">
                <li>
                    <!-- ko with: metric -->
                    <input type="text" placeholder="Time" />
                    <div class="vote vote-2">
                        <div class="set">
                            <input type="radio" value="seconds" data-bind="attr: {'name': elId, 'id': elId + '_s'}" checked/>
                            <label data-bind="attr: {'for': elId + '_s'}">Seconds</label>
                        </div>
                        <div class="set">
                            <input type="radio" value="minutes" data-bind="attr: {'name': elId, 'id': elId + '_m'}"/>
                            <label data-bind="attr: {'for': elId + '_m'}">Minutes</label>
                        </div>
                    </div>
                    <!-- /ko -->
                </li>
            </ol>
            <!-- /ko -->

            <!-- ko if: metricType() == 'distance' -->
            <ol class="value metric distance" data-bind="foreach: exercises">
                <li>
                    <!-- ko with: metric -->
                    <input type="text" placeholder="Distance covered" />
                    <div class="vote vote-2">
                        <div class="set">
                            <input type="radio" value="kilometres" data-bind="attr: {'name': elId, 'id': elId + '_km'}" checked />
                            <label data-bind="attr: {'for': elId + '_km'}">Kilometres</label>
                        </div>
                        <div class="set">
                            <input type="radio" value="miles" data-bind="attr: {'name': elId, 'id': elId + '_m'}" />
                            <label data-bind="attr: {'for': elId + '_m'}">Miles</label>
                        </div>
                    </div>
                    <!-- /ko -->
                </li>
            </ol>
            <!-- /ko -->

            <!-- ko if: metricType() == 'rep' -->
            <ol class="value metric rep" data-bind="foreach: exercises">
                <li>
                    <!-- ko with: metric -->
                    <input type="text" placeholder="Number of reps" />
                    <!-- /ko -->
                </li>
            </ol>
            <!-- /ko -->

            <!-- ko if: metricType() == 'weight' -->
            <ol class="metric value weight" data-bind="foreach: exercises">
                <li>
                    <!-- ko with: metric -->
                    <div class="weightSet">
                        <input type="text" class="rep" placeholder="# of reps" />
                        <input type="text" class="weight" placeholder="Weight in KG" />
                    </div>
                    <div class="vote vote-2">
                        <div class="set">
                            <input type="radio" value="kilograms" data-bind="attr: {'name': elId, 'id': elId + '_kg'}" checked />
                            <label data-bind="attr: {'for': elId + '_kg'}">Kilograms</label>
                        </div>
                        <div class="set">
                            <input type="radio" value="pounds" data-bind="attr: {'name': elId, 'id': elId + '_lb'}" />
                            <label data-bind="attr: {'for': elId + '_lb'}">Pounds</label>
                        </div>
                    </div>
                    <!-- /ko -->
                </li>
            </ol>
            <!-- /ko -->

        </div>

        <div class="field">
            <div class="addRep" data-bind="visible: exercises().length > 0">
                <input type="button" value="Add rep set" data-bind="click: addRep" />
            </div>
        </div>

    </section>

    <div class="field action">
        <input type="button" value="Add another workout" data-bind="click: addSet" />
    </div>

    <div class="field action">
        <input type="button" value="Save session" />
    </div>

</fieldset>


